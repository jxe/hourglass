<!-- 
Todo
- add goes to blank edit page w. two text fields and updater button and cancel button
- edit page lets you get an image url from an instagram search
- edit page w/ add suggestion url
- edit lets you change categories
- browse displays categories
- better page layout. add is hidden..
-->


<style>
	body{ font-family: helvetica; }
	#dockitems a { display:inline-block; text-align:center; text-decoration: none;}
	#dockitems img { height: 200px; width: 200px; border-radius: 10px; }
	#dockitems h2 { font-size: 18px; color: black; }
</style>




<h2>Welcome to the Dock Item Store!</h2>
<p>Click an item below to install it on your sand dock and do more of it.</p>
<div id="dockitems">
	<a data-set="href:url"><img data-set="src:image_url"><h2 class="title"></h2></a>
</div>

<p>Or you can also <a href="sandapp:reset-dock">reset your dock to factory settings</a>.</p>

<p>Or <a id="add_dockitem">add your own</a></p>




<script src='https://cdn.firebase.com/v0/firebase.js'></script>
<script src="firemapper.js"></script>
<script>
var q = Quickfire("https://sandstore.firebaseio.com", {
	init: function(q){
		q.param('$category', 'main');
	},

	live_updating: {
		"#dockitems": "dockitems_by_category/$category[]"
	},

	computed_fields: {
		"#dockitems": {
			'url': function(data){
				var title = data.title.replace(' ', '+');	
				return "sandapp:dockitem?title="+title+"&image_url="+data.image_url;
			}
		}
	},

	on_click: {
		"#add_dockitem": function(){
			var title, image_url;
			if (!(title = prompt('Title:'))) return;
			if (!(image_url = prompt('Image URL:'))) return;
			q.domref('#dockitems').push({
				title: title, 
				image_url: image_url
			});
		}
	}
})
</script>
